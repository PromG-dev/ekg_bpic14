{
  "name": "BPIC14",
  "version": "1.0.0",
  "records": [
    "(record:EventRecord {timestamp, activity})",
    "(record:IncidentOpenRecord {incidentId, openTime})",
    "(record:IncidentReopenRecord {incidentId, reopenTime})",
    "(record:IncidentCloseRecord {incidentId, closeTime})",
    "(record:ConfigurationItemAffRecord {ciNameAff, OPTIONAL ciTypeAff, OPTIONAL ciSubtypeAff})",
    "(record:ConfigurationItemCByRecord {ciNameCBy, OPTIONAL ciTypeCBy, OPTIONAL ciSubtypeCBy})",
    "(record:ServiceComponentAffRecord {serviceComponentAff})",
    "(record:ServiceComponentCByRecord {serviceComponentCBy})",
    "(record:IncidentRecord {incidentId, OPTIONAL category, OPTIONAL resolvedTime, OPTIONAL status, OPTIONAL alertStatus, OPTIONAL impact, OPTIONAL urgency, OPTIONAL priority, OPTIONAL numReassignments, OPTIONAL handleTimeHours, OPTIONAL closureCode})",
    "(record:InteractionRecord {interactionId, OPTIONAL impact, OPTIONAL urgency, OPTIONAL priority, OPTIONAL status, OPTIONAL firstCallResolution, OPTIONAL category, OPTIONAL openTime, OPTIONAL closeTime, OPTIONAL handleTimeSecs, OPTIONAL closureCode})",
    "(record:RelatedInteractionRecord {relatedInteractionId})",
    "(record:ChangeRecord {changeId, OPTIONAL changeType, OPTIONAL riskAssessment, OPTIONAL emergencyChange, OPTIONAL cabApprovalNeeded, OPTIONAL originatedFrom, OPTIONAL numRelatedIncidents, OPTIONAL numRelatedInteractions})",
    "(record:ChangeRecordPlannedStartRecord {changeId, plannedStart})",
    "(record:ChangeRecordPlannedEndRecord {changeId, plannedEnd})",
    "(record:RequestedEndRecord {changeId, requestedEndDate})",
    "(record:ChangeRecordOpenRecord {changeId, changeRecordOpenTime})",
    "(record:ChangeRecordCloseRecord {changeId, changeRecordCloseTime})",
    "(record:ChangeActualStartRecord {changeId, actualStart})",
    "(record:ChangeActualEndRecord {changeId, actualEnd})",
    "(record:RelatedChangeRecord {relatedChange})",
    "(record:ResourceRecord {assignmentGroup})",
    "(record:KMRecord {kmNumber})"
  ],
  "nodes": [
    {
      "include": true,
      "type": "Event",
      "constructor": [
        {
          "merge": false,
          "prevalent_record": "(record:EventRecord)",
          "result": "(e:Event {timestamp:record.timestamp, activity:record.activity})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:IncidentOpenRecord)",
          "result": "(e:Event {timestamp:record.openTime, activity: \"Open Incident\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:IncidentReopenRecord)",
          "result": "(e:Event {timestamp:record.reopenTime, activity: \"Reopen Incident\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:IncidentCloseRecord)",
          "result": "(e:Event {timestamp:record.closeTime, activity: \"Close Incident\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordOpenRecord)",
          "result": "(e:Event {timestamp:record.changeRecordOpenTime, activity: \"Open Change Record\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordCloseRecord)",
          "result": "(e:Event {timestamp:record.changeRecordCloseTime, activity: \"Close Change Record\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeActualStartRecord)",
          "result": "(e:Event {timestamp:record.actualStart, activity: \"Start Change Implementation\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeActualEndRecord)",
          "result": "(e:Event {timestamp:record.actualEnd, activity: \"End Change Implementation\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordPlannedStartRecord)",
          "result": "(e:Event {timestamp:record.plannedStart, activity: \"Planned Start\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordPlannedEndRecord)",
          "result": "(e:Event {timestamp:record.plannedEnd, activity: \"Planned End\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:RequestedEndRecord)",
          "result": "(e:Event {timestamp:record.requestedEndDate, activity: \"Requested End\"})"
        }
      ]
    },
    {
      "type": "EventType",
      "include": true,
      "constructor": [
        {
          "merge": true,
          "prevalent_record": "(record:EventRecord)",
          "result": "(a:EventType {eventType:record.activity})"
        },
        {
          "merge": true,
          "prevalent_record": "(record:IncidentOpenRecord)",
          "result": "(a:EventType {eventType: \"Open Incident\"})"
        },
        {
          "merge": true,
          "prevalent_record": "(record:IncidentReopenRecord)",
          "result": "(a:EventType {eventType: \"Reopen Incident\"})"
        },
        {
          "merge": true,
          "prevalent_record": "(record:IncidentCloseRecord)",
          "result": "(a:EventType {eventType: \"Close Incident\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordOpenRecord)",
          "result": "(a:EventType {eventType: \"Open Change Record\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordCloseRecord)",
          "result": "(a:EventType {eventType: \"Close Change Record\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeActualStartRecord)",
          "result": "(a:EventType {eventType: \"Start Change Implementation\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeActualEndRecord)",
          "result": "(a:EventType {eventType: \"End Change Implementation\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordPlannedStartRecord)",
          "result": "(e:Event {eventType: \"Planned Start\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:ChangeRecordPlannedEndRecord)",
          "result": "(e:Event {eventType: \"Planned End\"})"
        },
        {
          "merge": false,
          "prevalent_record": "(record:RequestedEndRecord)",
          "result": "(e:Event {eventType: \"Requested End\"})"
        }
      ]
    },
    {
      "type": "ConfigurationItem",
      "include": true,
      "constructor": [
        {
          "merge": true,
          "prevalent_record": "(record:ConfigurationItemAffRecord)",
          "result": "(ci:ConfigurationItem {IDENTIFIER sysId: record.ciNameAff, OPTIONAL type: record.ciTypeAff, OPTIONAL subType: record.ciSubtypeAff})"
        },
        {
          "merge": true,
          "prevalent_record": "(record:ConfigurationItemCByRecord)",
          "result": "(ci:ConfigurationItem {IDENTIFIER sysId: record.ciNameCBy, OPTIONAL type: record.ciTypeCBy, OPTIONAL subType: record.ciSubtypeCBy})"
        }
      ]
    },
    {
      "type": "ServiceComponent",
      "include": true,
      "constructor": [
        {
          "merge": true,
          "prevalent_record": "(record:ServiceComponentAffRecord)",
          "result": "(sc:ServiceComponent {IDENTIFIER sysId: record.serviceComponentAff})"
        },
        {
          "merge": true,
          "prevalent_record": "(record:ServiceComponentCByRecord)",
          "result": "(sc:ServiceComponent {IDENTIFIER sysId: record.serviceComponentCBy})"
        }
      ]
    },
    {
      "type": "Incident",
      "include": true,
      "constructor": [
        {
          "merge": true,
          "prevalent_record": "(record:IncidentRecord)",
          "result": "(i:Incident {IDENTIFIER sysId: record.incidentId, OPTIONAL category: record.category, OPTIONAL resolvedTime: record.resolvedTime, OPTIONAL status: record.status, OPTIONAL alertStatus: record.alertStatus, OPTIONAL impact: record.impact, OPTIONAL urgency: record.urgency, OPTIONAL priority: record.priority, OPTIONAL numReassignments: record.numReassignments, OPTIONAL handleTimeHours: record.handleTimeHours, OPTIONAL closureCode: record.closureCode})",
          "inferred_relationships": [
            {
              "event": "(:Event {activity: \"Open Incident\"})",
              "record_labels": "IncidentOpenRecord",
              "relation_type": "OPENS"
            },
            {
              "event": "(:Event {activity: \"Reopen Incident\"})",
              "record_labels": "IncidentReopenRecord",
              "relation_type": "REOPENS"
            },
            {
              "event": "(:Event {activity: \"Close Incident\"})",
              "record_labels": "IncidentCloseRecord",
              "relation_type": "CLOSES"
            }
          ]
        }
      ],
      "infer_df": true,
      "include_label_in_df": true,
      "merge_duplicate_df": true
    },
    {
      "type": "Interaction",
      "include": true,
      "constructor": [
        {
          "merge": true,
          "prevalent_record": "(record:InteractionRecord)",
          "result": "(it:Interaction {IDENTIFIER sysId: record.interactionId, OPTIONAL impact: record.impact, OPTIONAL urgency: record.urgency, OPTIONAL priority: record.priority, OPTIONAL status: record.status, OPTIONAL firstCallResolution: record.firstCallResolution, OPTIONAL category: record.category, OPTIONAL openTime: record.openTime, OPTIONAL closeTime: record.closeTime, OPTIONAL handleTimeSecs: record.handleTimeSecs, OPTIONAL closureCode: record.closureCode})",
          "inferred_relationships": [
            {
              "record_labels": "EventRecord",
              "relation_type": "ACTS_ON"
            }
          ]
        },
        {
          "merge": true,
          "include": false,
          "prevalent_record": "(record:RelatedInteractionRecord)",
          "result": "(it:Interaction {IDENTIFIER sysId: record.relatedInteractionId})"
        }
      ],
      "include_label_in_df": true,
      "merge_duplicate_df": true
    },
    {
      "type": "Change",
      "include": true,
      "constructor": [
        {
          "merge": true,
          "prevalent_record": "(record: ChangeRecord)",
          "result": "(c:Change {IDENTIFIER sysId: record.changeId, OPTIONAL type: record.changeType, OPTIONAL riskAssessment: record.riskAssessment, OPTIONAL emergencyChange: record.emergencyChange, OPTIONAL cabApprovalNeeded: record.cabApprovalNeeded, OPTIONAL originatedFrom: record.originatedFrom, OPTIONAL numRelatedIncidents: record.numRelatedIncidents, OPTIONAL numRelatedInteractions: record.numRelatedInteractions})"
        },
        {
          "merge": true,
          "prevalent_record": "(record:RelatedChangeRecord)",
          "result": "(c:Change {IDENTIFIER sysId: record.relatedChange})"
        }
      ],
      "inferred_relationships": [
        {
          "event": "(:Event {activity: \"Open Change Record\"})",
          "record_labels": "ChangeRecordOpenRecord",
          "relation_type": "OPENS RECORD"
        },
        {
          "event": "(:Event {activity: \"Close Change Record\"})",
          "record_labels": "ChangeRecordCloseRecord",
          "relation_type": "CLOSES RECORD"
        },
        {
          "event": "(:Event {activity: \"Start Change Implementation\"})",
          "record_labels": "ChangeActualStartRecord",
          "relation_type": "START"
        },
        {
          "event": "(:Event {activity: \"End Change Implementation\"})",
          "record_labels": "ChangeActualEndRecord",
          "relation_type": "END"
        },
        {
          "event": "(:Event {activity:  \"Requested End\"})",
          "record_labels": "RequestedEndRecord",
          "relation_type": "CORR"
        },
        {
          "event": "(:Event {activity:  \"Planned End\"})",
          "record_labels": "ChangeRecordPlannedEndRecord",
          "relation_type": "CORR"
        },
        {
          "event": "(:Event {activity:  \"Planned Start\"})",
          "record_labels": "ChangeRecordPlannedStartRecord",
          "relation_type": "CORR"
        }
      ]
    },
    {
      "type": "Resource",
      "include": true,
      "constructor": [
        {
          "prevalent_record": "(record:ResourceRecord)",
          "result": "(res:Resource {IDENTIFIER sysId: record.assignmentGroup})",
          "merge": true,
          "inferred_relationships": [
            {
              "record_labels": "EventRecord",
              "relation_type": "EXECUTED_BY"
            }
          ]
        }
      ],
      "infer_df": true,
      "include_label_in_df": true,
      "merge_duplicate_df": true
    },
    {
      "type": "KnowledgeDocument",
      "include": true,
      "constructor": [
        {
          "prevalent_record": "(record:KMRecord)",
          "result": "(km:KnowledgeDocument {IDENTIFIER sysId: record.kmNumber})",
          "merge": true
        }
      ]
    }
  ],
  "relations": [
    {
      "type": "RELATED_CHANGE",
      "constructor": {
        "prevalent_record": "(:IncidentRecord:RelatedChangeRecord)",
        "from_node": "(i:Incident)",
        "to_node": "(c:Change)",
        "result": "(i) - [:RELATED_CHANGE] -> (c)"
      }
    },
    {
      "type": "CAUSED_BY",
      "constructor": {
        "prevalent_record": "(:IncidentRecord:ConfigurationItemCByRecord)",
        "from_node": "(i:Incident)",
        "to_node": "(ci:ConfigurationItem)",
        "result": "(i) - [:CAUSED_BY] -> (ci)"
      }
    },
    {
      "type": "AFFECTED_CI",
      "constructor": [
        {
          "prevalent_record": "(:IncidentRecord:ConfigurationItemAffRecord)",
          "from_node": "(i:Incident)",
          "to_node": "(ci:ConfigurationItem)",
          "result": "(i) - [:AFFECTED_CI] -> (ci)"
        },
        {
          "prevalent_record": "(:InteractionRecord:ConfigurationItemAffRecord)",
          "from_node": "(i:Interaction)",
          "to_node": "(ci:ConfigurationItem)",
          "result": "(i) - [:AFFECTED_CI] -> (ci)"
        }
      ]
    },
    {
      "type": "RelatedServiceComponent",
      "constructor": [
        {
          "prevalent_record": "(record:ConfigurationItemAffRecord:ServiceComponentAffRecord)",
          "from_node": "(ci:ConfigurationItem {sysId:record.ciNameAff})",
          "to_node": "(sc:ServiceComponent {sysId:record.serviceComponentAff})",
          "result": "(ci) - [:RELATED_SERVICE_COMPONENT] -> (sc)"
        },
        {
          "prevalent_record": "(record:ConfigurationItemCByRecord:ServiceComponentCByRecord)",
          "from_node": "(ci:ConfigurationItem {sysId:record.ciNameCBy})",
          "to_node": "(sc:ServiceComponent {sysId:record.serviceComponentCBy}",
          "result": "(ci) - [:RELATED_SERVICE_COMPONENT] -> (sc)"
        }
      ]
    },
    {
      "type": "ChangedBy",
      "constructor": {
        "prevalent_record": "(:ChangeRecord:ConfigurationItemAffRecord)",
        "from_node": "(ci:ConfigurationItem)",
        "to_node": "(c:Change)",
        "result": "(ci) - [:CHANGED_BY] -> (c)"
      }
    },
    {
      "type": "UsedKM",
      "constructor": [
        {
          "prevalent_record": "(:InteractionRecord:KMRecord)",
          "from_node": "(i:Interaction)",
          "to_node": "(kd:KnowledgeDocument)",
          "result": "(i) - [:USED_KM] -> (kd)"
        },
        {
          "prevalent_record": "(:IncidentRecord:KMRecord)",
          "from_node": "(i:Incident)",
          "to_node": "(kd:KnowledgeDocument)",
          "result": "(i) - [:USED_KM] -> (kd)"
        }
      ]
    },
    {
      "type": "RELATED_INTERACTION",
      "constructor": {
        "prevalent_record": "(:IncidentRecord:RelatedInteractionRecord)",
        "from_node": "(id:Incident)",
        "to_node": "(it:Interaction)",
        "result": "(id) - [:RELATED_INTERACTION] -> (it)"
      }
    }
  ]
}